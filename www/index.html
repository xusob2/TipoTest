<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Mobile - Hacking Ã‰tico</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app">
        <div id="main-menu" class="screen active">
            <header>
                <h1>ğŸ›¡ï¸ Mobile Quiz System</h1>
            </header>
            <main class="menu-content">
                <button class="menu-button primary-btn" onclick="showScreen('module-selection')">
                    Hacer un Test (Comenzar)
                </button>
                <button class="menu-button secondary-btn" onclick="showScreen('high-scores')">
                    ğŸ† Mejores Puntuaciones
                </button>
                <button class="menu-button admin-btn" onclick="showScreen('admin-area')">
                    âš™ï¸ AdministraciÃ³n de Temas
                </button>
            </main>
        </div>

        <div id="module-selection" class="screen hidden">
            <header>
                <h2>Seleccionar MÃ³dulo</h2>
            </header>
            <main id="module-list" class="scrollable-content">
                <p>Cargando mÃ³dulos...</p>
            </main>
            <footer>
                <button class="footer-btn" onclick="showScreen('main-menu')">â† Volver</button>
            </footer>
        </div>

        <div id="quiz-container" class="screen hidden">
            <header class="quiz-header">
                <div class="progress-bar-container">
                    <div id="progress-bar" class="progress-bar"></div>
                </div>
                <div class="info-row">
                    <span id="quiz-title" class="module-title"></span>
                    <span id="progress-text">P: 1/0</span>
                    <span id="score-text">Aciertos: 0</span>
                </div>
                <div id="nav-buttons-container" class="nav-buttons-desktop"></div>
            </header>
            
            <main class="quiz-content scrollable-content">
                <div id="question-card" class="card">
                    <p id="question-text" class="question-text"></p>
                    <div id="options-container" class="options"></div>
                </div>
                
                <div id="feedback-area" class="card feedback-area hidden">
                    <h4 id="feedback-status"></h4>
                    <p id="feedback-explanation"></p>
                </div>
            </main>

            <footer>
                <button id="prev-btn" class="footer-btn secondary-btn" disabled>â† Anterior</button>
                <button id="next-btn" class="footer-btn primary-btn" onclick="nextQuestion()">Siguiente â†’</button>
                <button id="submit-btn" class="footer-btn success-btn hidden" onclick="submitTest()">ğŸ“Š Finalizar</button>
                <button id="return-btn" class="footer-btn warning-btn" onclick="returnToModuleSelection()">ğŸ”„ Cambiar</button>
            </footer>
        </div>

        <div id="summary-screen" class="screen hidden">
            <header>
                <h2>Resultados del Test</h2>
            </header>
            <main id="summary-content" class="scrollable-content">
                </main>
            <footer>
                <button class="footer-btn secondary-btn" onclick="showScreen('module-selection')">Otro Test</button>
                <button class="footer-btn primary-btn" onclick="showScreen('main-menu')">MenÃº Principal</button>
            </footer>
        </div>

        <div id="high-scores" class="screen hidden">
            <header>
                <h2>ğŸ† Mejores Puntuaciones</h2>
            </header>
            <main id="scores-list" class="scrollable-content">
                <p>Cargando puntuaciones...</p>
            </main>
            <footer>
                <button class="footer-btn" onclick="showScreen('main-menu')">â† Volver</button>
            </footer>
        </div>

        <div id="admin-area" class="screen hidden">
            <header>
                <h2>âš™ï¸ AdministraciÃ³n</h2>
            </header>
            <main class="scrollable-content">
                <div class="admin-actions">
                    <button class="menu-button primary-btn" onclick="showAdminUpload()">Cargar Nuevo MÃ³dulo (JSON)</button>
                    <button class="menu-button secondary-btn" onclick="showAdminDeleteList()">Gestionar/Borrar MÃ³dulos</button>
                </div>

                <div id="admin-messages" class="message-area"></div>

                <div id="admin-upload-section" class="card hidden">
                    <h3>Subir Preguntas</h3>
                    <p class="hint">Pega el JSON de tu array de preguntas. AsegÃºrate de incluir el <code>"moduleName"</code>.</p>
                    <textarea id="json-input" rows="10" placeholder="[{ 'moduleName': '...', 'question': '...', 'options': [...], 'correct': 0, 'explanation': '...'}]"></textarea>
                    <button class="menu-button success-btn" onclick="uploadNewModule()">Subir y Procesar</button>
                </div>

                <div id="admin-delete-list-section" class="card hidden">
                    <h3>Eliminar MÃ³dulos Existentes</h3>
                    <div id="delete-module-list"></div>
                </div>
            </main>
            <footer>
                <button class="footer-btn" onclick="showScreen('main-menu')">â† Volver</button>
            </footer>
        </div>
    </div>

    <div id="confirmation-modal" class="modal-overlay hidden">
    <div class="modal-content">
        <h3>Â¿EstÃ¡s seguro?</h3>
        <p>Si abandonas ahora, perderÃ¡s el progreso actual del test.</p>
        <div class="modal-buttons">
            <button id="modal-cancel-btn" class="menu-button primary-btn">Cancelar</button>
            <button id="modal-confirm-btn" class="menu-button danger-btn">Abandonar</button>
        </div>
    </div>
</div>
    
    <script src="script.js"></script>
</body>
</html>